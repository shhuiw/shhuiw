<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>lsblk - list information about block devices</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="shenghui">

    <!-- Le styles -->
    <link rel="stylesheet" href="/theme/css/bootstrap.min.css" type="text/css" />
    <style type="text/css">
      body {
        padding-top: 60px;
        padding-bottom: 40px;
      }
      .sidebar-nav {
        padding: 9px 0;
      }
      .tag-1 {
        font-size: 13pt;
      }
      .tag-2 {
        font-size: 10pt;
      }
      .tag-2 {
        font-size: 8pt;
      }
      .tag-4 {
        font-size: 6pt;
     }
    </style>
    <link href="/theme/css/bootstrap-responsive.min.css" rel="stylesheet">
        <link href="/theme/css/font-awesome.css" rel="stylesheet">

    <link href="/theme/css/pygments.css" rel="stylesheet">

    <!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="//html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Le fav and touch icons -->
    <link rel="shortcut icon" href="/theme/images/favicon.ico">
    <link rel="apple-touch-icon" href="/theme/images/apple-touch-icon.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/theme/images/apple-touch-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/theme/images/apple-touch-icon-114x114.png">

    <link href="/" type="application/atom+xml" rel="alternate" title="shhuiw's Technotes ATOM Feed" />

  </head>

  <body>

    <div class="navbar navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container-fluid">
          <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a class="brand" href="/index.html">shhuiw's Technotes </a>
          <div class="nav-collapse">
            <ul class="nav">
                          <li class="divider-vertical"></li>
                  <li >
                    <a href="/category/bing-fa.html">
						<i class="icon-folder-open icon-large"></i>并发
					</a>
                  </li>
                  <li class="active">
                    <a href="/category/block-io.html">
						<i class="icon-folder-open icon-large"></i>Block I/O
					</a>
                  </li>
                  <li >
                    <a href="/category/device-mapper.html">
						<i class="icon-folder-open icon-large"></i>device-mapper
					</a>
                  </li>
                  <li >
                    <a href="/category/fio.html">
						<i class="icon-folder-open icon-large"></i>fio
					</a>
                  </li>
                  <li >
                    <a href="/category/wei-fen-lei.html">
						<i class="icon-folder-open icon-large"></i>未分类
					</a>
                  </li>
                  <li >
                    <a href="/category/wen-jian-xi-tong.html">
						<i class="icon-folder-open icon-large"></i>文件系统
					</a>
                  </li>

                          <ul class="nav pull-right">
                                <li><a href="/archives.html"><i class="icon-th-list"></i>Archives</a></li>
                          </ul>

            </ul>
            <!--<p class="navbar-text pull-right">Logged in as <a href="#">username</a></p>-->
          </div><!--/.nav-collapse -->
        </div>
      </div>
    </div>

    <div class="container-fluid">
      <div class="row">
        <div class="span9" id="content">
<section id="content">
        <article>
                <header>
                        <h1>
                                <a href=""
                                        rel="bookmark"
                                        title="Permalink to lsblk - list information about block devices">
                                        lsblk - list information about block devices
                                </a>
                        </h1>
                </header>
                <div class="entry-content">
                <div class="well">
<footer class="post-info">
<span class="label">Date</span>
<abbr class="published" title="2018-10-11T17:00:00+08:00">
        <i class="icon-calendar"></i>Thu 11 October 2018
</abbr>
<span class="label">By</span>
<a href="/author/shenghui.html"><i class="icon-user"></i>shenghui</a>
<span class="label">Category</span>
<a href="/category/block-io.html"><i class="icon-folder-open"></i>Block I/O</a>.


<span class="label">Tags</span>
	<a href="/tag/util-linux.html"><i class="icon-tag"></i>util-linux</a>
</footer><!-- /.post-info -->                </div>
                <ul>
<li>
<p><a href="http://man7.org/linux/man-pages/man8/lsblk.8.html">http://man7.org/linux/man-pages/man8/lsblk.8.html</a></p>
</li>
<li>
<p><a href="https://git.kernel.org/pub/scm/utils/util-linux/util-linux.git">https://git.kernel.org/pub/scm/utils/util-linux/util-linux.git</a></p>
</li>
<li>
<p><a href="https://github.com/karelzak/util-linux">https://github.com/karelzak/util-linux</a></p>
</li>
</ul>
<p>The lsblk command is part of the <strong>util-linux</strong> package. lsblk lists information about all available or the specified block devices. The lsblk command reads the <code>sysfs filesystem</code> and <code>udev db</code> to gather information. <strong>If the udev db is not available or lsblk is compiled without udev support than it tries to read LABELs, UUIDs and filesystem types from the block device</strong>. In this case root permissions are necessary.</p>
<div class="highlight"><pre><span></span>    lsblk [options] [device...]
</pre></div>


<p>The lsblk command needs to be able to look up each block device by  <strong>major:minor</strong> numbers, which is done by using <code>/sys/dev/block</code>.  This sysfs block directory appeared in kernel 2.6.27 (October 2008).  In case of problems with a new enough kernel, check that <strong>CONFIG_SYSFS</strong> was enabled at the time of the kernel build.</p>
<p>For <strong>partitions</strong>, some information  (e.g. queue attributes) is inherited from the parent device.</p>
<p>The command prints all block devices (<strong>except RAM disks, by default</strong>) in a tree-like format by default.</p>
<p>Use <code>lsblk --help</code> to get a list of all available columns.</p>
<p>The default output, as well as the default output from options like --fs and --topology, is subject to change. So whenever possible, you <strong>should avoid using default outputs in your scripts</strong>. <strong>Always explicitly define expected columns</strong> by using <code>--output columns-list</code> in environments where a stable output is required.</p>
<p><strong>脚本里面用到 lsblk 需要使用 --output columns-list 显示指定输出列</strong></p>
<p>Note that lsblk might be executed in time <strong>when udev does not have all</strong> information about recently added or modified devices yet. In this case it is recommended to <strong>use udevadm settle before lsblk to synchronize with udev</strong>. </p>
<p><strong>设备变动后需要先用 udevadm 同步一下 udev db，之后再使用 lsblk 命令</strong></p>
<h4>Available output columns</h4>
<div class="highlight"><pre><span></span>    NAME        device name
    MAJ:MIN     major:minor device number

    KNAME       internal kernel device name
    PKNAME      internal parent kernel device name

    FSTYPE      filesystem type
    MOUNTPOINT  where the device is mounted
    LABEL       filesystem LABEL
    UUID        filesystem UUID

    PARTTYPE    partition type UUID
    PARTLABEL   partition LABEL
    PARTUUID    partition UUID
    PARTFLAGS   partition flags

    TYPE        device type
    MODEL       device identifier
    SERIAL      disk serial number
    REV         device revision
    VENDOR      device vendor

    SCHED       I/O scheduler name
    RQ-SIZE     request queue size  
    SIZE        size of the device  
    ALIGNMENT   alignment offset
    MIN-IO      minimum I/O size
    OPT-IO      optimal I/O size
    PHY-SEC     physical sector size
    LOG-SEC     logical sector size 

    WWN         unique storage identifier
    HCTL        Host:Channel:Target:Lun for SCSI
    TRAN        device transport type
    SUBSYSTEMS  de-duplicated chain of subsystems

    RM          removable device
    HOTPLUG     removable or hotplug device (usb, pcmcia, ...)

    STATE       state of the device

    OWNER       user name
    GROUP       group name
    MODE        device node permissions

    ROTA        rotational device
    RA          read-ahead of the device
    RO          read-only device

    DISC-ALN    discard alignment offset
    DISC-GRAN   discard granularity
    DISC-MAX    discard max bytes
    DISC-ZERO   discard zeroes data

    WSAME       write same max bytes

    RAND        adds randomness

    ZONED       zone model
</pre></div>


<h4>OPTIONS</h4>
<div class="highlight"><pre><span></span>    -a, --all
            Also list empty devices and RAM disk devices.

    -n, --noheadings
            Do not print a header line.

    -p, --paths
            Print full device paths.

    -S, --scsi
            Output info about SCSI devices only.  
            All partitions, slaves and holder devices are ignored.

    -t, --topology
            Output info about block-device topology. This option is
            equivalent to
                -o NAME,ALIGNMENT,MIN-IO,OPT-IO,PHY-SEC, \
                   LOG-SEC,ROTA,SCHED,RQ-SIZE,RA,WSAME

    -o, --output list
            Specify which output columns to print. 
            Use --help to get a list of all supported columns.

            The default list of columns may be extended if list is
            specified in the format
                            +list (e.g. lsblk -o +UUID)

    -O, --output-all
            Output all available columns.

    -i, --ascii
            Use ASCII characters for tree formatting.

    -J, --json
            Use JSON output format.

    -l, --list
            Produce output in the form of a list.

    -b, --bytes
            Print the SIZE column in bytes rather than in a 
            human-readable format.

    -D, --discard
            Print information about the discarding capabilities 
            (TRIM, UNMAP) for each device.

    -d, --nodeps
            Do not print holder devices or slaves.  
            For example, 
                    lsblk --nodeps /dev/sda
            prints information about the sda device only.

    -f, --fs
            Output info about filesystems. This option is equivalent to
                    -o NAME,FSTYPE,LABEL,UUID,MOUNTPOINT 
            The authoritative information about filesystems and raids
            is provided by the blkid(8) command.

    -e, --exclude list
            Exclude the devices specified by the comma-separated
            list of major device numbers.
            The filter is applied to the top-level devices only. This
            maybe be confusing for --list output format where
            hierarchy of the devices is not obvious.

            Note that RAM disks (major=1) are excluded by default if 
            --all is no specified.

    -I, --include list
            Include devices specified by the comma-separated list of
            major device numbers.
            The filter is applied to the top-level devices only. This 
            maybe be confusing for --list output format where
            hierarchy of the devices is not obvious.

    -m, --perms
            Output info about device owner, group and mode.  
            This option is equivalent to
                    -o NAME,SIZE,OWNER,GROUP,MODE.

    -P, --pairs
            Produce output in the form of key=&quot;value&quot; pairs.  
            All potentially unsafe characters are hex-escaped (\x&lt;code&gt;).

    -r, --raw
            Produce output in raw format. All potentially unsafe
            characters are hex-escaped (\x&lt;code&gt;) in the
                NAME, KNAME, LABEL, PARTLABEL,MOUNTPOINT     
            columns.

    -s, --inverse
            Print dependencies in inverse order. If the --list output 
            is requested then the lines are still ordered by dependencies.

    -x, --sort column
            Sort output lines by column. This option enables --list
            output format by default. It is possible to use the option 
            --tree to force tree-like output and than the tree branches
            are sorted by the column.

    -z, --zoned
            Print the zone model for each device.

    --sysroot directory
            Gather data for a Linux instance other than the instance
            from which the lsblk command is issued. The specified
            directory is the system root of the Linux instance to be
            inspected.  
            This option is designed for the testing purpose.

    -h, --help
            Display help text and exit.

    -V, --version
            Display version information and exit.
</pre></div>


<h4>RETURN CODES</h4>
<div class="highlight"><pre><span></span>    0   success
    1   failure
    32  none of specified devices found
    64  some specified devices found, some not found
</pre></div>


<h4>ENVIRONMENT</h4>
<div class="highlight"><pre><span></span>    LSBLK_DEBUG=all     enables lsblk debug output.

    LIBBLKID_DEBUG=all  enables libblkid debug output.

    LIBMOUNT_DEBUG=all  enables libmount debug output.

    LIBSMARTCOLS_DEBUG=all
                        enables libsmartcols debug output.

    LIBSMARTCOLS_DEBUG_PADDING=on
                        use visible padding characters. 
                        Requires enabled LIBSMARTCOLS_DEBUG.
</pre></div>
                </div><!-- /.entry-content -->
        </article>
</section>
        </div><!--/span-->

                <div class="span3 well sidebar-nav" id="sidebar">
<ul class="nav nav-list">

<li class="nav-header"><h4><i class="icon-folder-close icon-large"></i>Categories</h4></li>
<li>
<a href="/category/bing-fa.html">
    <i class="icon-folder-open icon-large"></i>并发
</a>
</li>
<li>
<a href="/category/block-io.html">
    <i class="icon-folder-open icon-large"></i>Block I/O
</a>
</li>
<li>
<a href="/category/device-mapper.html">
    <i class="icon-folder-open icon-large"></i>device-mapper
</a>
</li>
<li>
<a href="/category/fio.html">
    <i class="icon-folder-open icon-large"></i>fio
</a>
</li>
<li>
<a href="/category/wei-fen-lei.html">
    <i class="icon-folder-open icon-large"></i>未分类
</a>
</li>
<li>
<a href="/category/wen-jian-xi-tong.html">
    <i class="icon-folder-open icon-large"></i>文件系统
</a>
</li>

<li class="nav-header"><h4><i class="icon-tags icon-large"></i>Tags</h4></li>
<li class="tag-4">
    <a href="/tag/iostat.html">
        <i class="icon-tag icon-large"></i>iostat
    </a>
</li>
<li class="tag-2">
    <a href="/tag/bio.html">
        <i class="icon-tag icon-large"></i>bio
    </a>
</li>
<li class="tag-4">
    <a href="/tag/request-tagging.html">
        <i class="icon-tag icon-large"></i>request tagging
    </a>
</li>
<li class="tag-4">
    <a href="/tag/kyber.html">
        <i class="icon-tag icon-large"></i>kyber
    </a>
</li>
<li class="tag-1">
    <a href="/tag/multiqueue.html">
        <i class="icon-tag icon-large"></i>multiqueue
    </a>
</li>
<li class="tag-4">
    <a href="/tag/single-queue.html">
        <i class="icon-tag icon-large"></i>single queue
    </a>
</li>
<li class="tag-4">
    <a href="/tag/f2fs.html">
        <i class="icon-tag icon-large"></i>f2fs
    </a>
</li>
<li class="tag-4">
    <a href="/tag/cfq.html">
        <i class="icon-tag icon-large"></i>CFQ
    </a>
</li>
<li class="tag-4">
    <a href="/tag/bfq.html">
        <i class="icon-tag icon-large"></i>BFQ
    </a>
</li>
<li class="tag-4">
    <a href="/tag/bvec.html">
        <i class="icon-tag icon-large"></i>bvec
    </a>
</li>
<li class="tag-1">
    <a href="/tag/device-mapper.html">
        <i class="icon-tag icon-large"></i>device-mapper
    </a>
</li>
<li class="tag-2">
    <a href="/tag/fio.html">
        <i class="icon-tag icon-large"></i>fio
    </a>
</li>
<li class="tag-4">
    <a href="/tag/atomic_ops.html">
        <i class="icon-tag icon-large"></i>atomic_ops
    </a>
</li>
<li class="tag-4">
    <a href="/tag/workqueue.html">
        <i class="icon-tag icon-large"></i>workqueue
    </a>
</li>
<li class="tag-4">
    <a href="/tag/util-linux.html">
        <i class="icon-tag icon-large"></i>util-linux
    </a>
</li>


</ul>        </div><!--/.well -->

      </div><!--/row-->

      <hr>

      <footer>
        <address id="about">
                Proudly powered by <a href="http://pelican.notmyidea.org/">Pelican <i class="icon-external-link"></i></a>,
                                which takes great advantage of <a href="http://python.org">Python <i class="icon-external-link"></i></a>.
        </address><!-- /#about -->

        <p>The theme is from <a href="http://twitter.github.com/bootstrap/">Bootstrap from Twitter <i class="icon-external-link"></i></a>,
                   and <a href="http://fortawesome.github.com/Font-Awesome/">Font-Awesome <i class="icon-external-link"></i></a>, thanks!</p>
      </footer>

    </div><!--/.fluid-container-->



    <!-- Le javascript -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="/theme/js/jquery-1.7.2.min.js"></script>
    <script src="/theme/js/bootstrap.min.js"></script>
  </body>
</html>